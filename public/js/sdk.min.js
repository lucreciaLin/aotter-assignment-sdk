const dataList=[],dataListForSpa=[];function getData(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&(dataList.push(JSON.parse(this.responseText)),makeDom(dataList,t))},n.open("GET","http://0.0.0.0:3000/database/ads?type="+e,!0),n.send()}function makeDom(e,t){for(var n=e.length,a=0;a<n;a++){formElems(e[a],t)}}function formElems(e,t){var n=document.getElementById(t),a=document.createElement("div");a.setAttribute("id",e.id),n.appendChild(a);var s=document.createElement("span");a.appendChild(s);var o=document.createTextNode(e.title);s.appendChild(o);var i=document.createElement("figure");a.appendChild(i);var d=document.createElement("img");i.appendChild(d),d.setAttribute("src",e.image)}function getWhichList(e){return"auto"==e?dataList:dataListForSpa}function onAdLoaded(e){for(var t=[],n=getWhichList(e),a=n.length,s=0;s<a;s++){var o=n[s];1==o.success&&t.push(o.id)}t.length>0&&console.log("ad id: ",t," 載入成功。")}function onAdFailed(e){for(var t=[],n=getWhichList(e),a=n.length,s=0;s<a;s++){var o=n[s];0==o.success&&t.push(o.id)}t.length>0&&console.log("ad id: ",t," 載入失敗。")}function onAdImpression(e){for(var t=window.innerWidth*window.innerHeight*.5,n=getWhichList(e),a=n.length,s=0;s<a;s++){var o=n[s],i=document.getElementById(o.id);i.offsetWidth*i.offsetHeight>t?setTimeout(function(){console.log("開始呼叫 impression_url"),callImpressionUrl(o.impression_url)},1e3):console.log("未能呼叫 impression_url")}}function callImpressionUrl(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==this.readyState&&200==this.status&&console.log("完成呼叫 impression_url")},t.open("GET",e,!0),t.withCredentials=!0,t.send()}function renderAdInSPA(e,t){document.getElementById(t),showSpaZone=function(){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&(dataListForSpa.push(JSON.parse(this.responseText)),makeDom(dataListForSpa,t))},n.open("GET","http://0.0.0.0:3000/database/ads?type="+e,!0),n.send()},document.addEventListener("DOMContentLoaded",function(e){window.requestAnimationFrame(showSpaZone)})}